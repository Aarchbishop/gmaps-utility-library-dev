<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>GZoomControl Documentation: Examples</title>
   <link rel="stylesheet" type="text/css" href="http://code.google.com/apis/maps/documentation/local_extensions.css" /> 
   <link rel="stylesheet" type="text/css" href="http://code.google.com/css/dev_docs.css" />
   <script type="text/javascript" src="http://code.google.com/apis/maps/include/prettify.js"></script>
  </head>
  <body onload="prettyPrint()">
<h1><a name="GZoomControl_HowTo" id="GZoomControl_HowTo"></a>GZoomControl How-to</h1>

You can add GZoom to any Google map with a couple of lines of code.
<ol>
  <li>Include gzoom.js in your document header. </li>
    <pre class="code">&lt;script src=&quot;gzoom.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</pre>

  <li>Add GZoom to your map like any other control. Example:</li>
    <pre class="code">map = new GMap2($id(&quot;large-google-map&quot;));<br />map.addControl(new GSmallMapControl());<br /><strong>map.addControl(new GZoomControl());
</strong></pre>
  <li><strong>Important!</strong> Make sure your and doctype and namespaces are set correctly:</li>
    <pre class="code">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;<br />
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:v=&quot;urn:schemas-microsoft-com:vml&quot; &gt;</pre>
  <li>For Internet Explorer: make sure you enable the VML behavior:
    <pre class="code">&lt;style type=&quot;text/css&quot;&gt;v\:* {behavior:url(#default#VML);}&lt;/style&gt;</pre>
  </li>
</ol>

<h1>A complete example HTML document</h1>
<p> This is the &quot;Hello World&quot; code from Google's GMaps documentation. The lines you need to add for GZoom are in bold. </p>

<pre class="code">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;<br />   &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:v=&quot;urn:schemas-microsoft-com:vml&quot; &gt;<br />  &lt;head&gt;<br />    &lt;style type=&quot;text/css&quot;&gt;v\:* {behavior:url(#default#VML);}&lt;/style&gt;<br />     &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;<br />    &lt;title&gt;Google Maps JavaScript API Example&lt;/title&gt;
		<br />    &lt;script src=&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=YOUR_KEY_HERE&quot;<br />      type=&quot;text/javascript&quot;&gt;&lt;/script&gt;<br />    <strong>&lt;script src=&quot;/javascripts/gzoom.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</strong><br />    &lt;script type=&quot;text/javascript&quot;&gt;<br /><br />    //&lt;![CDATA[<br /><br />    function load() {<br />      if (GBrowserIsCompatible()) {<br />        var map = new GMap2(document.getElementById(&quot;map&quot;));<br />        map.setCenter(new GLatLng(37.4419, -122.1419), 13);<br />       <strong> map.addControl(new GZoomControl());</strong><br />      }<br />    }<br /><br />    //]]&gt;<br />    &lt;/script&gt;<br />  &lt;/head&gt;<br />  &lt;body onload=&quot;load()&quot; onunload=&quot;GUnload()&quot;&gt;<br />    &lt;div id=&quot;map&quot; style=&quot;width: 900px; height: 600px&quot;&gt;&lt;/div&gt;<br />  &lt;/body&gt;<br />&lt;/html&gt;</pre>

<h2>Advanced usage</h2>
<p>The GZoom constructor takes three optional arguments, all three of which are 
  hashes of key-value pairs. All three are optional, but if you want to include 
  one, you need to include the previous hashes too, even if they are empty:</p>

	<span class="code">oMap.addControl(new GZoomControl({},{},{bStickyZoom:true}));</span>

<h3>First Hash: Visual options for the overlay</h3>
<p>The first optional hash you can pass to the GZoom constructor allows you to 
  customize the overlay which goes over the map when you activate GZoom. The hash 
  recognizes three keys:</p>

<ul>
    <li><strong>sColor</strong>: the color of the transparent veil which is put over                        the map when you click &quot;zoom...&quot;. Use a standard hex value                        for this. Defaults to #000.</li>

    <li><strong>nOpacity</strong>: the opacity of the veil -- a value from 0 to 1,                        with one 1 being totally opaque. Defaults to .2</li>
    <li><strong>sBorder</strong>: the border of the area which you drag on the map. Takes a three-part string, just as if you were specifying a border in CSS. Defaults to &quot;2px solid blue&quot;. If you specify this value, you must provide a three-part string in the same format.</li>
</ul>
Here's an example with all three properties specified:
<pre class="code">oMap.addControl(new GZoomControl({sColor:'#FFF',nOpacity:.4,sBorder:'1px solid yellow'}));</pre>
<h3>Second Hash: Other Options</h3>
<p>The second hash allows you to set the following options:</p>

<table border="1" width="100%">
  <thead>
	<tr>
      <th>Key</th>
      <th>Description</th>
      <th>Default</th>
  </tr>
	</thead>

  <tr>
    <td>sButtonHTML</td>
    <td>The HTML in the &quot;zoom&quot; button in normal, un-activated state</td>
    <td>'zoom ...'</td>
  </tr>
  <tr>

    <td>oButtonStartingStyle</td>
    <td>A hash of css styles for the zoom button which are common to both un-activated 
      and activated state</td>
    <td>{width:'52px',border:'1px solid black',padding:'0px 5px 1px 5px'}</td>
  </tr>
  <tr>
    <td>oButtonStyle</td>
    <td>A hash of css styles for the zoom button which will be applied when the 
      button is in un-activated state. </td>

    <td>{background:'#FFF'}</td>
  </tr>
  <tr>
    <td>sButtonZoomingHTML</td>
    <td>HTML which is placed in the zoom button when the button is activated.</td>
    <td>'Drag a region on the map'</td>
  </tr>

  <tr>
    <td>oButtonZoomingStyle</td>
    <td>A hash of css styles for the zoom button which will be applied when the 
      button is activated. </td>
    <td>{background:'#FF0'}</td>
  </tr>
  <tr>
    <td>nOverlayRemoveMS</td>

    <td>number of milliseconds to wait before removing the rectangle indicating 
      the zoomed-in area after the zoom has happened.</td>
    <td>6000</td>
  </tr>
  <tr>
    <td>bStickyZoom</td>
    <td>Whether or not the control stays in &quot;zoom mode&quot; until turned 
      off. When true, the user can zoom repeatedly, until clicking on the zoom 
      button again to turn zoom mode off.</td>

    <td>false</td>
  </tr>
  <tr>
    <td>bForceCheckResize</td>
    <td>If you modify the dimensions of the map by altering the css of its containing 
      div, you need to call map.checkResize() to alert the map that its dimensions 
      have changed. If for some reason you'll not able to do this, setting bForceCheckResize=true 
      will force GZoom to call checkResize on the map whenever the GZoom control 
      is clicked. Bottom line: you shouldn't need to set this to true, and if 
      you do it's because your code isn't doing something it should.</td>
    <td>false</td>
  </tr>

</table>


<h3>Third Hash: Callbacks</h3>
<p>The third hash allows you to set callback functions for various GZoom events:</p>
<table border="1" width="100%">
  <thead>
    <tr> 
      <th>callback name</th>
      <th>Description</th>

      <th>callback arguments</th>
    </tr>
  </thead>
  <tr> 
    <td>buttonClick</td>
    <td>called when the GZoom is activated by clicking on the &quot;zoom&quot; 
      button. </td>

    <td>none</td>
  </tr>
  <tr>
    <td>dragStart</td>
    <td>called when the user starts to drag a rectangle</td>
    <td>x,y -- the PIXEL values, relative to the upper-left-hand corner of the 
      map, where the user began dragging. See the GMaps API if you need to translate 
      this into latitude/longitude</td>
  </tr>

  <tr> 
    <td>dragging</td>
    <td>called repeatedly while the user is dragging</td>
    <td>startX,startY, currentX,currentY -- the PIXEL values of the start of the 
      drag, and the current drag point, respectively.</td>
  </tr>
  <tr> 
    <td>dragEnd</td>
    <td>called when the user releases the mouse button, after dragging the rectangle</td>

    <td>NW LatLng, NE LatLng, SE LatLng, SW LatLng, NW GPoint, NE GPoint, SE GPoint, 
      SW GPoint -- eight params in all, the first four describe latitude/longitudes; 
      the second four describe pixels coordinates on the map. Either set can be 
      used (depending on whether you need pixels or latitude/longitudes to determine 
      the rectangle that was zoomed in upon.</td>
  </tr>
</table>
<h2>An Example with Some Advanced Features</h2>
<p>This example customizes the overlay (first hash), provides some of the additional 
  options (second hash), and all of the callbacks (third hash): <a href="http://earthcode.com/demo/gzoom/demo1.html">see 
  example</a>. The GZoom instantiation code:</p>
	
<pre class="code">
  map.addControl(new GZoomControl(
		/* first set of options is for the visual overlay.*/
		{
			nOpacity:.2,
			sBorder:"2px solid red"
		},
		/* second set of options is for everything else */
		{
			sButtonHTML:"&lt;img src='/images/zoom-button.gif' /&gt;",
			sButtonZoomingHTML:"&lt;img src='/images/zoom-button-activated.gif' /&gt;",
			oButtonStartingStyle:{width:'24px',height:'24px'}
		},
		/* third set of options specifies callbacks */
		{
			buttonClick:function(){display("Looks like you activated GZoom!")},
			dragStart:function(){display("Started to Drag . . .")},
			dragging:function(x1,y1,x2,y2){display("Dragging, currently x="+x2+",y="+y2)},
			dragEnd:function(nw,ne,se,sw,nwpx,nepx,sepx,swpx){display("Zoom! NE="+ne+";SW="+sw)}
		}
	));	
	</pre>

<h2>Using an image for the button instead of text</h2>
<p>The example above demonstrates how to substitute an image for text on the GZoom 
  button. Basically, use the sButtonHTML and sButtonZoomingHTML arguments (in 
  the second hash) to specify images rather than text. You can put any valid html 
  in these arguments, even a combination of images and text. Just make sure you 
  set the width and height of the button (through the oButtonStartingStyle) as 
  appropriate for the look of the button. If you need to the shape/background 
  etc. of the button to change when activated, you can set styles in the oButtonZoomingStyle 
  argument.</p>
<h2>Specifying the position of the GZoom control</h2>
Like all controls, GZoom can be placed anywhere you want on the map by specifying an optional GControlPosition. An example:
<pre class="code">oMap.addControl(new GZoomControl(),new GControlPosition(G_ANCHOR_TOP_RIGHT,new GSize(10,10)));</pre>
<h2>Browser compatibility</h2>
<p>You need a modern browser. GZoom has been tested with IE6/XP, IE7/XP,Safari2/OS10.4,
FF1.4/OS10.4, FF1.4.1/XP, FF2/XP.</p>
<p>It works with  Opera9/XP, but there is some jumpiness and odd scrollbar behavior. </p>
<h2>Notes</h2>
<ul>
    <li>If you resize the map div via CSS you have to call map.checkResize() -- Google's rules, not mine!</li>
    <li>on IE, you must have VML enabled for the post-zoom outline to display: <a href="http://www.google.com/apis/maps/documentation/#XHTML_and_VML">see here</a></li>
    <li>if you're seeing wierdness on IE, check your doctype. I tested with mostly with XHTML 1.0 Transitional, and noticed some potential problems with border widths and scrolling on other doctypes.</li>
    <li>like any GMaps application, <strong>make sure you register GUnload() on document unload</strong>. See Google's documentation if you're not sure how.</li>
</ul>
</body>
</html>
