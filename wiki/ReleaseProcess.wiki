#summary How to release a new version or new library

= Introduction =

This is the release process for pushing stuff out to the release library. Anyone can make the releases, but if you do not feel comfortable with SVN or SVN tags, please email the list and request that a release engineer push it out.

Current release engineers are: pamela.fox, nianwei, wf9a5m75.

= Pushing out new libraries =
  # Do an svn update on local gmaps-utility-library-dev
  # Check the library meets the release requirements:
    * examples/:
      * Each example should work in our supported browsers (IE6+,FF2+,Chrome,Safari3+).
      * Each example should follow our conventions. See JavascriptCodingConventions.
      * There should be an example that covers each API option/function (a wizard can be a good way to do this, for a complex constructor).
      * The examples should have descriptive, simple filenames.
      * Each example should have a script tag and HTML links that allow for easy checking of the packed JS. See [http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/1.0/examples/simple_example.html this example].
    * docs/:
      * reference.html: 
        * The reference should be autogenerated using JSDoc and the "all-docs" ant target. See UsingUtilities.
        * The JSDoc comments should be easily readable English. If you are not a native English speaker, ask another developer to revise them for you.
      * examples.html:
        * Every example should be referenced from this doc, with atleast a few sentences of description.
        * Make sure the code snippets are all up-to-date, if you changed any of the example code.
    * src/:
      * The code should follow our conventions. See JavascriptCodingConventions.
      * There should be no use of undocumented API options or methods, and no hacking of the DOM. Basically, the library should be future-proof.
      * There should be an up-to-date packed version of the code, generated using the "all-pack" ant target. See UsingUtilities.
  # If you made any changes while checking that the requirements were met, commit those changes.
  # Email [http://groups.google.com/group/google-maps-utility-library the group] and tell them that the library is nearly ready to release. Ask them to report on any issues found, and ask for approval to release (generally from pamela.fox).
  # Once approved, follow the steps below for pushing out new versions, skipping to step 3. The main difference for a new library is that you need to create a folder for the library in /tags/ first. 


= Pushing out new versions =
  # Verify that examples exist that test all the introduced changes since last release. You can see what revision a tag represents by clicking "diff" on the revision that created the tag. The revision will be on the left side. For example:
    * http://code.google.com/p/gmaps-utility-library-dev/source/list?path=/tags/markerclusterer
    * http://code.google.com/p/gmaps-utility-library-dev/source/detail?r=1048&path=/tags/markerclusterer
    * http://code.google.com/p/gmaps-utility-library-dev/source/diff?spec=svn1048&r=1048&format=side&path=/tags/markerclusterer/1.0&old_path=/trunk/markerclusterer&old=987
  # Test each of the files in http://gmaps-utility-library-dev.googlecode.com/svn/trunk/library/examples to make sure they work as intended in IE, FF, Safari.
  # Do an svn update on local gmaps-utility-library-dev
  # Change version number in the comments of the .js file to reflect new version number.
  # Check examples and docs to make sure they don't reference any relative files that will have a different relative location once in the tagged folder (e.g. CSS).
  # Make sure you have the /tags/ directory checked out - the default source checkout only gets the /trunk/. If you need to, do a new checkout of /svn/. 
  # Do an svn copy to a tagged folder for the release version. If needed, you can specify a revision to do it from with "-r NNN".
{{{
svn copy trunk/library tags/library/N.N
}}}
  # Run svn propset on all files (for HTML/CSS). This makes sure they show up in the browser:
{{{
find . -name '*.html' | xargs svn propset svn:mime-type text/html
find . -name '*.css' | xargs svn propset svn:mime-type text/css
find . -name '*.js' | xargs svn propset svn:mime-type text/javascript
find . -name '*.xml' | xargs svn propset svn:mime-type text/xml
find . -name '*.png' | xargs svn propset svn:mime-type image/png
find . -name '*.gif' | xargs svn propset svn:mime-type image/gif
find . -name '*.jpg' | xargs svn propset svn:mime-type image/jpeg
}}}
  # Run a svn diff between the folder for the last version with the folder for the new version. Make sure you recognize all changes. 
{{{
svn diff tags/labeledmarker/1.1 tags/labeledmarker/1.2
//or, if that fails, diff the JS files
diff tags/1.1/src/labeledmarker.js tags/1.2/src/labeledmarker.js
}}}
  # Test each of the files in release/examples to make sure they work as intended in IE, FF, Safari.
  # Run svn commit on the new folder. In the message, reference which revisions this release represents.
{{{
 svn commit -m "Adding LabeledMarker v1.2. Represents versions 589 through 631 of the development library. See http://code.google.com/p/gmaps-utility-library-dev/source/list?path=/trunk/labeledmarker/" tags/1.2/
}}}
  # Test each of the files in http://gmaps-utility-library.googlecode.com/svn/trunk/library/NN/examples to make sure API keys work, mime-types are correct, etc. Browser bugs should be worked out by now.
  # Update release_notes.txt in the /library/ folder to indicate changes and changed issues. (TODO: Is that where it should go?)


== After committing ==
  # Email the mailing list about the new version.
  # Add the library to the front page to the Libraries wiki.
  # Go to Administer->Issues and add a label for your class (e.g. Class-KeyDragZoom).
  # Add examples to the Google Maps API demo gallery. (Ask Pamela)
  # Publish a blog post announcing the new library. See BlogPostGuidelines.